<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Material Did√°tico: Express√µes Regulares para An√°lise de Processos Jur√≠dicos</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            line-height: 1.6; 
            margin: 0; 
            padding: 20px; 
            background: #f8f9fa; 
            color: #333;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            padding: 40px; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 { 
            color: #2c3e50; 
            text-align: center; 
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 { 
            color: #34495e; 
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 40px;
        }
        h3 { 
            color: #2c3e50; 
            margin-top: 30px;
        }
        pre { 
            background: #2d3748; 
            color: #e2e8f0;
            padding: 20px; 
            border-radius: 8px; 
            overflow-x: auto;
            margin: 15px 0;
            font-size: 14px;
        }
        code {
            background: #f1f5f9;
            color: #1e293b;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
        }
        pre code {
            background: none;
            color: #e2e8f0;
            padding: 0;
        }
        .highlight {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc li {
            margin: 8px 0;
        }
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .emoji-section {
            text-align: center;
            margin: 25px 0;
            font-size: 3em;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        blockquote {
            border-left: 4px solid #3498db;
            margin: 20px 0;
            padding: 10px 20px;
            background: #f8f9fa;
            font-style: italic;
        }
        .step-number {
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Material Did√°tico: Express√µes Regulares para An√°lise de Processos Jur√≠dicos</h1>
        
        <div class="highlight">
            <strong>üéØ Objetivo da Aula:</strong> Desenvolver compet√™ncias pr√°ticas em express√µes regulares para extrair informa√ß√µes espec√≠ficas de textos jur√≠dicos, aplicando-as ao desafio de identificar processos sobre cr√©dito consignado e valores de indeniza√ß√£o.
        </div>

        <div class="emoji-section">
            üê±‚Äçüíª
            <p style="font-size: 0.5em; margin-top: 10px;"><em>Vamos come√ßar nossa jornada pelo mundo das express√µes regulares! üöÄ</em></p>
        </div>

        <div class="toc">
            <h3>üìã Sum√°rio</h3>
            <ul>
                <li><a href="#setup">0. Setup Inicial</a></li>
                <li><a href="#estrutura">1. Estrutura do Dataset</a></li>
                <li><a href="#importacao">2. Importa√ß√£o dos Dados</a></li>
                <li><a href="#verificacao">3. Verifica√ß√£o P√≥s-Importa√ß√£o</a></li>
                <li><a href="#limpeza">4. Normaliza√ß√£o e Limpeza dos Dados</a></li>
                <li><a href="#regex">5. Express√µes Regulares Aplicadas</a></li>
                <li><a href="#validacao">6. Valida√ß√£o do Modelo</a></li>
            </ul>
        </div>

        <h2 id="setup"><span class="step-number">0</span>SETUP INICIAL üîß</h2>

        <div class="emoji-section">
            ‚öôÔ∏è
        </div>

        <pre><code>pip install pandas</code></pre>

        <pre><code>import pandas as pd
import re
import numpy as np</code></pre>

        <h2 id="estrutura"><span class="step-number">1</span>ESTRUTURA DO DATASET üìä</h2>

        <div class="emoji-section">
            üìäüîç
            <p style="font-size: 0.4em; margin-top: 10px;"><em>Analisando a estrutura dos dados...</em></p>
        </div>

        <h3>1.1 Estrutura do dataset</h3>
        <p>Nosso dataset (<code>dataset_clinica20252.csv</code>) cont√©m <strong>19.800 observa√ß√µes</strong> com as seguintes colunas:</p>

        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Descri√ß√£o</th>
                    <th>Caracter√≠sticas</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>cd_causa</code></td>
                    <td>C√≥digo identificador do caso</td>
                    <td>10 caracteres, formato: CIB + n√∫meros</td>
                </tr>
                <tr>
                    <td><code>cd_atendimento</code></td>
                    <td>N√∫mero do processo</td>
                    <td>25 caracteres, formato: NNNNNN-XX.YYYY.Z.AA.BBBB</td>
                </tr>
                <tr>
                    <td><code>ds_Acao_Judicial</code></td>
                    <td>Tipo da a√ß√£o</td>
                    <td>Predominantemente "90 - ACAO DE REPARACAO DE DANOS"</td>
                </tr>
                <tr>
                    <td><code>ds_fatos</code></td>
                    <td>Descri√ß√£o dos fatos</td>
                    <td>Texto longo (at√© 5.000 caracteres)</td>
                </tr>
                <tr>
                    <td><code>ds_Pedidos</code></td>
                    <td>Pedidos do autor</td>
                    <td>Texto longo (at√© 5.000 caracteres)</td>
                </tr>
                <tr>
                    <td><code>ds_Qualificacao</code></td>
                    <td>Qualifica√ß√£o das partes</td>
                    <td>Dados das partes envolvidas</td>
                </tr>
            </tbody>
        </table>

        <h2 id="importacao"><span class="step-number">2</span>IMPORTA√á√ÉO DOS DADOS üìÇ</h2>

        <div class="emoji-section">
            üìÅ
        </div>

        <pre><code># Importa√ß√£o do dataset
df = pd.read_csv('dataset_clinica20252.csv', delimiter='|', encoding='utf-8')</code></pre>

        <h2 id="verificacao"><span class="step-number">3</span>VERIFICA√á√ÉO P√ìS-IMPORTA√á√ÉO ‚úÖ</h2>

        <div class="emoji-section">
            üîç‚úÖ
            <p style="font-size: 0.4em; margin-top: 10px;"><em>Verificando a integridade dos dados...</em></p>
        </div>

        <h3>Verifica√ß√£o p√≥s importa√ß√£o</h3>

        <pre><code># FUN√á√ÉO: len()
# O QUE FAZ: conta o n√∫mero de linhas (registros) no DataFrame
# SINTAXE: len(dataframe)
len(df)</code></pre>

        <pre><code># FUN√á√ÉO: list()
# O QUE FAZ: converte o √≠ndice(nome da coluna) das colunas em uma lista que 
# podemos ler facilmente
# SINTAXE: list(df.columns)
list(df.columns)</code></pre>

        <h4>N√∫mero de NAs</h4>

        <pre><code># FUN√á√ÉO: df.dropna()
# O QUE FAZ: remove todas as linhas que t√™m pelo menos um valor vazio (NaN)
# SINTAXE: df.dropna()  

# FUN√á√ÉO: .shape[0]
# O QUE FAZ: retorna o n√∫mero de linhas do DataFrame resultante
# SINTAXE: dataframe.shape[0]  

df.dropna().shape[0]</code></pre>

        <h2 id="limpeza"><span class="step-number">4</span>NORMALIZA√á√ÉO E LIMPEZA DOS DADOS üßπ</h2>

        <div class="emoji-section">
            üßΩ
        </div>

        <pre><code># FUN√á√ÉO: df.head()
# O QUE FAZ: mostra as primeiras 5 linhas do DataFrame
# SINTAXE: df.head(numero_de_linhas)
df.head(3)</code></pre>

        <pre><code># FUN√á√ÉO: df['coluna'].str.contains()
# O QUE FAZ: busca por padr√µes espec√≠ficos dentro de uma coluna de texto
# SINTAXE: df['coluna'].str.contains('padr√£o')
problemas_encoding = df['ds_fatos'].str.contains('√É∆í√Ç¬™|√É∆í√Ç¬©|√É∆í√Ç¬°|√É∆í√Ç¬≥|√É∆í√Ç¬≠|√É∆í√Ç¬∫|√É∆í√Ç¬ß|√É∆í√Ç¬£|√Ç¬©', 
                                                  na=False)  
problemas_encoding.sum()</code></pre>

        <div class="highlight">
            <strong>üí° Configurar pandas para quebrar texto automaticamente</strong>
        </div>

        <pre><code># FUN√á√ÉO: pd.set_option()
# O QUE FAZ: define largura m√°xima antes de quebrar o texto
# SINTAXE: pd.set_option('display.width', valor) 
pd.set_option('display.width', 80)
pd.set_option('display.max_colwidth', 80)</code></pre>

        <h3>Fun√ß√£o para ver o inteiro teor da c√©lula</h3>

        <pre><code>import textwrap 

for indice, texto in df[problemas_encoding]['ds_fatos'].head(5).items():    
    print(f"Registro {indice}:")    
    print(textwrap.fill(texto, width=80))    
    print("-" * 80)</code></pre>

        <h3>Verificar problemas com espa√ßamento</h3>

        <pre><code>problemas_espaco = df['ds_fatos'].str.contains('  +', na=False)  
problemas_espaco.sum()</code></pre>

        <pre><code>for indice, texto in df[problemas_espaco]['ds_fatos'].head(5).items():    
    print(f"Registro {indice}:")    
    print(textwrap.fill(texto, width=80))    
    print("-" * 80)</code></pre>

        <pre><code>caracteres_corrompidos = df['ds_fatos'].str.contains('', na=False)
caracteres_corrompidos.sum()</code></pre>

        <h3>Limpar espa√ßamento duplo e s√≠mbolo</h3>

        <pre><code># FUN√á√ÉO: df['coluna'].str.replace()
# O QUE FAZ: substitui caracteres espec√≠ficos por outros
# SINTAXE: df['coluna'].str.replace('caractere_antigo', 'caractere_novo')
# COMPLETAR: caracteres espec√≠ficos 
df['ds_fatos'] = df['ds_fatos'].str.replace('', '')
df['ds_Pedidos'] = df['ds_Pedidos'].str.replace('', '')</code></pre>

        <pre><code># FUN√á√ÉO: df['coluna'].str.replace() com regex
# O QUE FAZ: substitui m√∫ltiplos espa√ßos por um √∫nico espa√ßo
# SINTAXE: df['coluna'].str.replace('padr√£o_regex', 'substituto', regex=True)
# COMPLETAR: espa√ßamento duplo
# padr√£o_regex - string raw: r'\s+' 
df['ds_fatos'] = df['ds_fatos'].str.replace(r'\s+', ' ', regex=True)
df['ds_Pedidos'] = df['ds_Pedidos'].str.replace(r'\s+', ' ', regex=True)</code></pre>

        <h2 id="regex"><span class="step-number">5</span>EXPRESS√ïES REGULARES APLICADAS üéØ</h2>

        <div class="emoji-section">
            üéØüìù
            <p style="font-size: 0.4em; margin-top: 10px;"><em>Aplicando express√µes regulares...</em></p>
        </div>

        <h3>Como filtrar processos sobre cr√©dito consignado</h3>

        <div class="highlight">
            <strong>Ver valores √∫nicos como output direto</strong>
        </div>

        <pre><code># FUN√á√ÉO: df['coluna'].unique()
# O QUE FAZ: retorna array com todos os valores √∫nicos da coluna
# SINTAXE: df['coluna'].unique() 
valores_unicos_fatos = df['ds_fatos'].unique()  

# Para ver o output, simplesmente chame a vari√°vel:
valores_unicos_fatos[:10]  # apenas os 10 primeiros</code></pre>

        <pre><code>for indice, texto in enumerate(valores_unicos_fatos[:1000]):    
    print(f"valor √∫nico {indice + 1}")    
    print(textwrap.fill(str(texto), width=80))    
    print("-" * 80)</code></pre>

        <pre><code># FUN√á√ÉO: re.compile()
# O QUE FAZ: cria padr√£o que busca empr√©stimo E consignado no mesmo texto
# SINTAXE: re.compile(r'padr√£o')
# COMPLETAR: 
padrao_emprestimo_consignado = re.compile(r'empr√©stimo\sconsignado|empr√©stimo\spor\sconsigna√ß√£o|' \
                                          r'empr√©stimos\sconsignados|contrato\sde\sconsigna√ß√£o')</code></pre>

        <pre><code># COMPLETAR: 
resultados = [] 

for texto in df['ds_fatos']:    
    matches = padrao_emprestimo_consignado.findall(texto)    
    if len(matches) > 0:        
        resultados.append(True)    
    else:        
        resultados.append(False)</code></pre>

        <h3>Como resolvemos o erro acima?</h3>

        <pre><code># FUN√á√ÉO: for loop com verifica√ß√£o de tipo
# O QUE FAZ: percorre cada linha verificando se √© texto antes de aplicar findall()
# SINTAXE: for texto in df['coluna'] com isinstance()
# A fun√ß√£o isinstance(texto, str) verifica se o valor √© string antes de aplicar o regex,
# evitando o erro com valores float/NaN.

# COMPLETAR COM isinstance 
resultados = [] 

for texto in df['ds_fatos']:    
    if isinstance(texto, str):         
        matches = padrao_emprestimo_consignado.findall(texto)        
        if len(matches) > 0:            
            resultados.append(True)        
        else:            
            resultados.append(False)    
    else:       
        resultados.append(False)</code></pre>

        <pre><code># FUN√á√ÉO: df['nova_coluna'] = lista
# O QUE FAZ: cria nova coluna no DataFrame com os valores da lista
# SINTAXE: df['nome_coluna'] = lista_valores
# FUN√á√ÉO: sum()
# O QUE FAZ: soma todos os valores True da coluna (conta quantos s√£o True)
# SINTAXE: sum(df['coluna_booleana'])
# COMPLETAR
df['eh_emprestimo_consignado'] = resultados
df['eh_emprestimo_consignado'].sum()</code></pre>

        <pre><code># FUN√á√ÉO: df['coluna'].value_counts()
# O QUE FAZ: conta frequ√™ncia absoluta de cada valor √∫nico na coluna
# SINTAXE: df['coluna'].value_counts() 
df['eh_emprestimo_consignado'].value_counts()</code></pre>

        <h3>Ser√° que classificamos corretamente?</h3>

        <pre><code>registros_consignado = df[df['eh_emprestimo_consignado'] == True]   

for indice, texto in enumerate(registros_consignado['ds_fatos'][:20]):    
    print(f"valor √∫nico {indice + 1}")    
    print(textwrap.fill(str(texto), width=80))    
    print("-" * 80)</code></pre>

        <h2 id="validacao"><span class="step-number">6</span>VALIDA√á√ÉO DO MODELO ‚úÖ</h2>

        <div class="emoji-section">
            üéâ‚úÖ
            <p style="font-size: 0.4em; margin-top: 10px;"><em>Validando nosso modelo...</em></p>
        </div>

        <h3>6.1 Estat√≠sticas gerais do dataset</h3>

        <div class="highlight">
            <strong>Estat√≠sticas gerais do dataset</strong>
        </div>

        <pre><code># FUN√á√ÉO: sum() e len()
# O QUE FAZ: calcula totais e percentuais
# SINTAXE: sum(coluna) / len(df) 
total_processos = len(df)
processos_consignado = sum(df['eh_emprestimo_consignado'])
percentual = (processos_consignado / total_processos) * 100 

print(f"=== ESTAT√çSTICAS GERAIS ===")
print(f"Total de processos: {total_processos}")
print(f"Processos de cr√©dito consignado: {processos_consignado}")
print(f"Percentual: {percentual:.1f}%")</code></pre>

        <h3>6.2 Valida√ß√£o por palavras-chave espec√≠ficas</h3>

        <pre><code># Casos que DEVEM ser pegos (teste de recall)</code></pre>

        <div class="highlight">
            <strong>Calcular percentual de textos √≥bvios capturados pelo regex</strong>
        </div>

        <pre><code># FUN√á√ÉO: df[df['coluna'].str.contains()]
# O QUE FAZ: filtra textos que cont√™m 'empr√©stimo consignado' literalmente
# SINTAXE: df[df['coluna'].str.contains('termo', na=False)] 
textos_obvios = df[df['ds_fatos'].str.contains('empr√©stimo consignado', na=False)] 

# FUN√á√ÉO: sum()
# O QUE FAZ: conta quantos textos √≥bvios o regex identificou como True
# SINTAXE: sum(coluna_booleana) 
capturados = sum(textos_obvios['eh_emprestimo_consignado']) 

# Percentual de textos √≥bvios que foram capturados
percentual_capturados = (capturados / len(textos_obvios)) * 100 

print(f"Total de textos √≥bvios: {len(textos_obvios)}")
print(f"Capturados pelo regex: {capturados}")
print(f"Percentual capturado: {percentual_capturados:.1f}%")</code></pre>

        <div class="emoji-section">
            üèÜ
            <p style="font-size: 0.4em; margin-top: 10px;"><em>Parab√©ns! Voc√™ concluiu a an√°lise com express√µes regulares!</em></p>
        </div>

        <blockquote>
            <h3>üö® Pr√≥ximos Passos</h3>
            <ol>
                <li><strong>Refinamento:</strong> Melhorar os padr√µes regex baseado nos resultados</li>
                <li><strong>Expans√£o:</strong> Aplicar t√©cnicas similares para extra√ß√£o de valores</li>
                <li><strong>Integra√ß√£o:</strong> Preparar dados para an√°lises com LLMs</li>
                <li><strong>Valida√ß√£o:</strong> Testar com amostras maiores</li>
            </ol>
        </blockquote>

        <h2>üéØ CONCLUS√ÉO</h2>
        <p>As express√µes regulares s√£o fundamentais para a primeira etapa de an√°lise de textos jur√≠dicos, permitindo:</p>
        <ul>
            <li><strong>Identifica√ß√£o automatizada</strong> de tipos de processo</li>
            <li><strong>Extra√ß√£o estruturada</strong> de informa√ß√µes quantitativas</li>
            <li><strong>Classifica√ß√£o inicial</strong> para direcionamento de casos</li>
            <li><strong>Prepara√ß√£o de dados</strong> para an√°lises mais sofisticadas com LLMs</li>
        </ul>

        <p><em>O pr√≥ximo passo ser√° aplicar essas t√©cnicas ao dataset completo e refinar os padr√µes com base nos resultados obtidos.</em></p>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <p><strong>üéâ Fim da aula!</strong></p>
        </div>
    </div>
</body>
</html>
